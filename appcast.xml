<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle" xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel>
        <title>Markdown Preview Enhanced</title>
        <link>https://xykong.github.io/markdown-quicklook/appcast.xml</link>
        <description>Most recent updates to Markdown Preview Enhanced</description>
        <language>zh-CN</language>

        <item>
            <title>Version 1.12.137</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.12.137</link>
            <sparkle:version>137</sparkle:version>
            <sparkle:shortVersionString>1.12.137</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Wed, 11 Feb 2026 12:48:19 +0000</pubDate>
            <enclosure
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.12.137/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="PiNAoPDeIvouQ9k7y9ZY7nKenxngWaCqahIsYH1dfq04ecAIcMe0VKjyj4kO1daw7sAalUvTFOqcRdohO2OxBA=="
                length="7428647"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>更新内容</h2><pre></pre><p><a href="https://github.com/xykong/markdown-quicklook/releases/tag/v1.12.137">查看完整更新日志</a></p>
            ]]></description>
        </item>
                
        <item>
            <title>Version 1.11.130</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.11.130</link>
            <sparkle:version>131</sparkle:version>
            <sparkle:shortVersionString>1.11.130</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Tue, 11 Feb 2026 11:09:00 +0000</pubDate>
            <enclosure
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.11.130/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="mN7YER9FykmegvX7im5BbSL9YGUNE82eDXYG+i/OVLbaOyL5glqFYRkf85fMPhuppMdLdC7GOMtqC5smxuNJBg=="
                length="7386706"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>新增功能 / Added</h2>
                <ul>
                    <li><strong>链接导航 (Link Navigation)</strong>: 为 Markdown 文档添加完整的链接跳转支持</li>
                    <li><strong>主应用 (Main App)</strong>:
                        <ul>
                            <li>外部 URL 链接 (http/https) 在默认浏览器中打开</li>
                            <li>相对路径链接 (<code>../file.md</code>, <code>./dir/file.md</code>) 正确解析并打开目标文件</li>
                            <li>页内锚点链接 (<code>#section</code>) 平滑滚动定位</li>
                            <li>支持所有文件类型 (<code>.md</code>, <code>.sql</code>, <code>.py</code>, <code>.json</code> 等)</li>
                        </ul>
                    </li>
                    <li><strong>QuickLook 预览 (Preview)</strong>:
                        <ul>
                            <li>由于 macOS 沙盒限制，所有链接点击时显示优雅的 toast 提示</li>
                            <li>Toast 位置: 顶部居中，自动关闭 (3 秒)</li>
                            <li>非阻塞: 用户可继续浏览文档</li>
                        </ul>
                    </li>
                    <li><strong>技术实现</strong>:
                        <ul>
                            <li>端到端桥接: JavaScript 通过 <code>window.webkit.messageHandlers.linkClicked</code> 传递链接信息给 Swift</li>
                            <li>页内锚点: JavaScript 直接处理平滑滚动</li>
                            <li>文件路径解析: 支持相对路径、绝对路径、<code>file://</code> 协议</li>
                        </ul>
                    </li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.10.127</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.10.127</link>
            <sparkle:version>127</sparkle:version>
            <sparkle:shortVersionString>1.10.127</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Mon, 09 Feb 2026 16:29:41 +0000</pubDate>
            <enclosure
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.10.127/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="1J1xAwMv3yhvn2c+GCEl15dIY+kDZ1d0bpz+sinG2knhiyXMKHqH1iyYOmEhRdbejOCrPpIXUVY1uk/KPESgBw=="
                length="7366532"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>新增功能 / Added</h2>
                <ul>
                    <li><strong>滚动位置记忆</strong>: 自动记录每个 Markdown 文件的滚动位置，下次打开时自动恢复到上次查看的位置</li>
                    <li>支持记录最近 100 个文件的位置</li>
                    <li>使用 LRU（最近最少使用）策略自动管理存储</li>
                    <li>存储位置通过 App Group 在主 App 和 QuickLook 扩展间共享</li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.10.124</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.10.124</link>
            <sparkle:version>124</sparkle:version>
            <sparkle:shortVersionString>1.10.124</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Mon, 09 Feb 2026 13:11:00 +0000</pubDate>
            <enclosure
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.10.124/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="1jwS+0KXQWR318HC8K8RkMeWVz7ezl0waKQqIb6KH9fD7oIgIdNye2ShrKsqtxE5Xg1ozK7hhid5jZB7V+dCAw=="
                length="7342465"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>安全性改进 / Security</h2>
                <ul>
                    <li><strong>沙盒权限优化</strong>: 将 QuickLook 扩展的文件访问权限从整个文件系统 (/) 缩小到仅用户主目录 ($HOME/)</li>
                    <li><strong>权限对话框改进</strong>: 文案从"访问所有数据"改为更友好的"访问您的主文件夹"</li>
                    <li><strong>安全性提升</strong>: 无法访问系统目录、其他用户数据和应用程序数据</li>
                    <li><strong>用户体验</strong>: 权限对话框更清晰易懂，仅需授权一次</li>
                    <li><strong>功能影响</strong>: 覆盖 99% 的真实使用场景（相对路径和用户主目录内的绝对路径仍可正常工作）</li>
                </ul>

                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>WKWebView 进程泄漏</strong>: 修复 QuickLook 扩展中 WKWebView 进程累积导致严重内存占用问题</li>
                    <li><strong>修复效果</strong>: Web Content 进程数量从 30+ 降低到 1-2 个，总内存占用从 2GB+ 降低到 100-200MB</li>
                </ul>

                <h2>文档 / Docs</h2>
                <ul>
                    <li>添加首次使用权限请求说明</li>
                    <li>添加完整的 Troubleshooting 章节</li>
                    <li>更新技术文档说明新的安全限制</li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.10.119</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.10.119</link>
            <sparkle:version>119</sparkle:version>
            <sparkle:shortVersionString>1.10.119</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Sun, 09 Feb 2026 03:51:37 +0000</pubDate>
            <enclosure
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.10.119/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="7zs5iZ6fXSrWGaEHmLr5YbHsGy/fUS9oPLjd0KHkelhXB/3qOJFgWMxah1zhQwGtL4+Nti+VZgW/Vhkn88ACDw=="
                length="7340051"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>WKWebView 进程泄漏</strong>: 修复 QuickLook 扩展中 WKWebView 进程累积导致严重内存占用问题</li>
                    <li><strong>问题表现</strong>: 预览多个 Markdown 文件时，会累积创建 30+ 个 "Web Content" 进程，每个进程占用 60-80MB，总内存占用达 2GB+</li>
                    <li><strong>根本原因</strong>: 缺少 WKProcessPool 共享机制、自定义 URL scheme handler 阻止进程共享、WKWebView 没有被正确清理</li>
                    <li><strong>解决方案</strong>: 添加共享 WKProcessPool、移除不必要的 custom scheme handler、在 viewWillDisappear 和 deinit 中添加完整清理逻辑</li>
                    <li><strong>修复效果</strong>: Web Content 进程数量从 30+ 降低到 1-2 个，总内存占用从 2GB+ 降低到 100-200MB</li>
                </ul>

                <p><strong>相关 Issue</strong>: <a href="https://github.com/xykong/markdown-quicklook/issues/6">#6</a></p>
            ]]></description>
        </item>

        <item>
            <title>Version 1.8.114</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.8.114</link>
            <sparkle:version>114</sparkle:version>
            <sparkle:shortVersionString>1.8.114</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Thu, 05 Feb 2026 06:23:51 +0000</pubDate>
            <enclosure 
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.8.114/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="5VxgworFFL4pMFZN4y1WK2RAy9MOheAzf9aFYWoIQaPMvIjWaywSYfXK2EhGf7ZZnLDmqWl74WNDxU+p/FACBA=="
                length="7338577"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>新增 / Added</h2>
                <ul>
                    <li><strong>页内搜索功能</strong>: 为主应用添加完整的页内搜索功能</li>
                    <li>✅ 浏览器风格的搜索工具栏 (Cmd+F 触发)</li>
                    <li>✅ 实时高亮所有匹配项 (黄色背景)</li>
                    <li>✅ 当前匹配项特殊高亮 (橙色背景)</li>
                    <li>✅ 匹配计数显示 (如 "3/15")</li>
                    <li>✅ 上一个/下一个匹配导航</li>
                    <li>✅ 支持多种搜索模式: 普通搜索、大小写敏感、全字匹配、正则表达式</li>
                    <li>✅ View 菜单和右键菜单集成</li>
                    <li>✅ 国际化支持 (英文/简体中文)</li>
                    <li>✅ 自动适配亮色/深色主题</li>
                </ul>
                
                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>Swift 编译警告</strong>: 修复 startAccessingSecurityScopedResource() 返回值未使用的警告</li>
                </ul>
                
                <p><strong>注意</strong>: QuickLook 预览模式暂不支持搜索功能</p>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.6.102</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.6.102</link>
            <sparkle:version>102</sparkle:version>
            <sparkle:shortVersionString>1.6.102</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Wed, 04 Feb 2026 02:02:00 +0800</pubDate>
            <enclosure 
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.6.102/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="V7HqjuQrdaDbfUlDUyE1ttgy1cjSbr7w76uj+tSCmKIUZVQsF17FSSJB2obxfMr8LPiNbjhnUxCImurd4H4qDA=="
                length="7290034"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>自动更新</strong>: 实现密钥迁移支持，允许从旧版本（v1.6.96 及更早）平滑更新</li>
                    <li>添加 <code>SUPublicEDKeyChain</code> 数组，同时包含新旧两个公钥</li>
                    <li>旧版本用户现在可以成功验证并安装新版本的更新</li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.6.100</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.6.100</link>
            <sparkle:version>100</sparkle:version>
            <sparkle:shortVersionString>1.6.100</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Wed, 04 Feb 2026 01:54:00 +0800</pubDate>
            <enclosure 
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.6.100/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="FODdhq7ltEKzdS5v+zgTlnQD/ti25CTPr/fJjXNU4HfBgmgbbwsXtjkZM2ZhNzXeOTSErR/svWsyerytpdZNAA=="
                length="7289961"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>自动更新</strong>: 修复签名验证错误 "improperly signed" 的问题</li>
                    <li>更新公钥以匹配新生成的 EdDSA 密钥对</li>
                    <li>重新签名所有更新包以确保签名验证通过</li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.6.99</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.6.99</link>
            <sparkle:version>99</sparkle:version>
            <sparkle:shortVersionString>1.6.99</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Wed, 04 Feb 2026 01:45:00 +0800</pubDate>
            <enclosure 
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.6.99/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="h048is5CZv6SafC4IbrMdwjEra7N7Ajos8Qi8BfQPFKkfxIPVHcLQwSSvvTZH4ccgQM0IRVcpLMgHVo77rz9Dw=="
                length="7292396"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>自动更新</strong>: 修复安装新版本时报错 "An error occurred while running the updater" 的问题</li>
                    <li>使用正确的 Sparkle XPC 服务名称：<code>$(PRODUCT_BUNDLE_IDENTIFIER)-spks</code> 和 <code>$(PRODUCT_BUNDLE_IDENTIFIER)-spki</code></li>
                    <li>之前使用的服务名 <code>com.xykong.Markdown.Installer</code> 不符合 Sparkle 规范</li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.6.96</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.6.96</link>
            <sparkle:version>96</sparkle:version>
            <sparkle:shortVersionString>1.6.96</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Wed, 04 Feb 2026 01:33:00 +0800</pubDate>
            <enclosure 
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.6.96/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="rt8MW/xG3PLHpxt2FcDnYu9M3qgPhBrtXhpczcYh9uiqt9EQNxLCNQSiH06egqkOWH+IxTzacVon/mZEOYv+BA=="
                length="7289941"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>自动更新</strong>: 修复安装新版本时报错 "An error occurred while launching the installer" 的问题</li>
                    <li>添加沙盒权限例外，允许 Sparkle 安装器与主应用通信并写入 /Applications 目录</li>
                    <li>启用 SUEnableInstallerLauncherService 支持沙盒应用的安装器启动服务</li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.6.93</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.6.93</link>
            <sparkle:version>93</sparkle:version>
            <sparkle:shortVersionString>1.6.93</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Tue, 03 Feb 2026 17:00:16 +0000</pubDate>
            <enclosure 
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.6.93/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="hbNYXHeSGGbkfuXxPe2knjnqAxgwf4HiqrHCW/Rusf3qMcFwPfnYwIkqy0LNK4BV8GqLfXDwef1tTdLuS38LAQ=="
                length="7289575"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>修复 / Fixed</h2>
                <ul>
                    <li><strong>自动更新</strong>: 修复手动检查更新无响应的问题</li>
                    <li>使用 SPUStandardUpdaterController 替代手动组装，这是 Sparkle 2.x 推荐的 SwiftUI 集成方式</li>
                    <li>使用 NSApp.sendAction() 正确触发更新检查的 AppKit action</li>
                </ul>
            ]]></description>
        </item>
        
        <item>
            <title>Version 1.6.90</title>
            <link>https://github.com/xykong/markdown-quicklook/releases/tag/v1.6.90</link>
            <sparkle:version>90</sparkle:version>
            <sparkle:shortVersionString>1.6.90</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>11.0</sparkle:minimumSystemVersion>
            <pubDate>Mon, 03 Feb 2026 23:25:00 +0800</pubDate>
            <enclosure 
                url="https://github.com/xykong/markdown-quicklook/releases/download/v1.6.90/MarkdownPreviewEnhanced.dmg"
                sparkle:edSignature="dJkl2q8746f8GZLBvUFQxGndAtlmWCtnU1QlCkufJt876oNXuwd440TexH1HomcCqxdJCaK8xL2KvORSUAnGCg=="
                length="7284896"
                type="application/octet-stream" />
            <description><![CDATA[
                <h2>重要更新 / Major Update</h2>
                <ul>
                    <li><strong>统一更新策略</strong>: 所有用户（Homebrew 和 DMG）现在都使用 Sparkle 自动更新</li>
                    <li><strong>菜单按钮</strong>: 所有用户都能看到"检查更新..."按钮（快捷键 ⌘U）</li>
                    <li><strong>及时更新</strong>: Homebrew 用户可立即获取更新，无需等待 Cask 维护者</li>
                </ul>
                
                <h2>改进 / Improvements</h2>
                <ul>
                    <li>删除 82 行代码，简化更新逻辑（45% 代码减少）</li>
                    <li>遵循业界标准（与 iTerm2、Docker Desktop、VSCode 一致）</li>
                    <li>更好的用户体验：统一、及时、安全</li>
                </ul>
                
                <h2>技术细节 / Technical Details</h2>
                <ul>
                    <li>移除所有 Homebrew 检测逻辑</li>
                    <li>总是初始化 Sparkle 自动更新器</li>
                    <li>Homebrew Cask 的 <code>auto_updates true</code> 防止冲突</li>
                </ul>
            ]]></description>
        </item>
        
    </channel>
</rss>
